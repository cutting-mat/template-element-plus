import{i as a,_ as e}from"./index.711114fb.js";import{r as t,aX as o,aY as r,o as s,t as l,b as i,w as d,aU as n,a as u,aC as m,ax as f}from"./ui.7155d707.js";const c={data(){return{loading:!1,formData:{token:"",checkPass:"",newPassword:""},rules:{newPassword:[{validator:(a,e,t)=>{""===e?t(new Error("请输入密码")):(""!==this.formData.checkPass&&this.$refs.form.validateField("checkPass"),t())},trigger:"blur"},{min:6,max:30,message:"长度在 6 到 30 个字符",trigger:"blur"}],checkPass:[{validator:(a,e,t)=>{""===e?t(new Error("请再次输入密码")):e!==this.formData.newPassword?t(new Error("两次输入密码不一致!")):t()},trigger:"blur"}]}}},methods:{submitForm(){this.$refs.form.validate((e=>{if(e){this.loading=!0;let e=Object.assign({},this.formData);delete e.checkPass,(t=e,a.put("/updatePassword",t,o)).then((()=>{this.loading=!1,this.$alert("密码修改成功",{callback:()=>{this.$router.go(-1)}})})).catch((()=>{this.loading=!1}))}var t,o}))}},created:function(){this.$route.query.authCode&&(this.formData.token=this.$route.query.authCode)}},h=f("提交");const p=e(c,[["render",function(a,e,f,c,p,w){const b=t("ToolBar"),g=t("el-alert"),P=t("input-password"),k=t("el-form-item"),D=t("el-input"),v=t("el-button"),y=t("el-form"),x=o("loading");return r((s(),l("div",null,[i(b),i(y,{class:"wrap",model:p.formData,"status-icon":"",rules:p.rules,ref:"form","label-width":"100px",onSubmit:n(w.submitForm,["prevent"])},{default:d((()=>[p.formData.token?m("",!0):(s(),u(g,{key:0,title:"未验证用户身份，请返回重试！",type:"error","show-icon":"",closable:!1,style:{"margin-bottom":"20px"}})),i(k,{label:"新密码",prop:"newPassword"},{default:d((()=>[i(P,{modelValue:p.formData.newPassword,"onUpdate:modelValue":e[0]||(e[0]=a=>p.formData.newPassword=a),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(k,{label:"确认密码",prop:"checkPass"},{default:d((()=>[i(D,{type:"password",modelValue:p.formData.checkPass,"onUpdate:modelValue":e[1]||(e[1]=a=>p.formData.checkPass=a),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(k,null,{default:d((()=>[i(v,{type:"primary","native-type":"submit"},{default:d((()=>[h])),_:1})])),_:1})])),_:1},8,["model","rules","onSubmit"])])),[[x,p.loading,void 0,{fullscreen:!0}]])}]]);export{p as default};
