import{_ as T,b as B,L as D,r as n,z as P,o,h as i,w as s,f as C,c as g,e as c,i as u,J as L,t as v,k as l,A as y,v as p}from"./index.325e0c38.js";import{r as q}from"./resource.028488fa.js";const M={props:{picker:{type:Boolean,required:!1,default:!1},modelValue:{type:Array,required:!1},listdata:{type:Array,required:!1}},data(){return{resource:q,list:[],defaultProps:{children:"children",label:"title"},typeColor:{get:"success",post:"primary",put:"warning",delete:"danger"},trigger:null}},watch:{listdata:{handler:function(e){Array.isArray(e)&&(this.list=e)},immediate:!0},modelValue:{handler:function(){Array.isArray(this.modelValue)&&this.$refs.tree.setCheckedKeys(this.modelValue)},deep:!0}},methods:{handleCheckChange(e,a,h){const m=this.$refs.tree.getNode(e);m&&(this.$refs.tree.setChecked(m,a),h&&Array.isArray(e.children)&&e.children.length&&e.children.forEach(r=>{this.handleCheckChange(r,a,h)})),this.$nextTick(()=>{this.trigger()})},fetchData:function(){this.$store.action("permission").then(e=>{this.list=B(e.menus.concat(e.resources)),Array.isArray(this.modelValue)&&this.$nextTick(()=>{this.$refs.tree.setCheckedKeys(this.modelValue)})})}},created:function(){this.listdata||this.fetchData()},mounted(){this.trigger=D(()=>{const e=this.$refs.tree.getCheckedNodes();this.$emit("updaate:modelValue",e.map(a=>a.id))})}},z={class:"custom-tree-item"},E={class:"flex-1 extendLable"},G={key:0,style:{color:"#67c23a"}},K={key:0,class:"extendGroup"},R=l(" \u7F16\u8F91 "),I=l(" \u6DFB\u52A0\u5B50\u83DC\u5355 "),J=l(" \u6DFB\u52A0\u8D44\u6E90 "),S=l(" \u5220\u9664 "),U={key:1,class:"extendGroup"},j=l(" \u6279\u91CF\u9009\u62E9 ");function F(e,a,h,m,r,x){const V=n("Medal"),k=n("el-icon"),$=n("Position"),A=n("el-tag"),b=n("Link"),d=n("el-button"),w=n("el-tree"),_=P("auth");return o(),i(w,{ref:"tree",class:"custom-tree",data:r.list,props:r.defaultProps,"node-key":"id","default-expand-all":"","show-checkbox":h.picker,"check-strictly":"",onCheckChange:x.handleCheckChange},{default:s(({node:N,data:t})=>[C("div",z,[C("div",E,[t.type===1?(o(),g("span",G,[c(k,null,{default:s(()=>[c(V)]),_:1})])):u("",!0),C("span",{style:{"margin-right":"20px"},class:L({source:t.type===1})},v(t.name),3),t.type===1?(o(),i(A,{key:1,type:r.typeColor[t.method]},{default:s(()=>[c(k,null,{default:s(()=>[c($)]),_:1}),l(" "+v(t.method.toUpperCase()),1)]),_:2},1032,["type"])):u("",!0),c(A,{type:"info"},{default:s(()=>[t.type===0?(o(),i(k,{key:0},{default:s(()=>[c(b)]),_:1})):u("",!0),l(" "+v(t.type===0?t.route:t.url),1)]),_:2},1024)]),h.picker?(o(),g("span",U,[c(d,{type:"text",onClick:p(f=>x.handleCheckChange(t,!N.checked,!0),["stop"])},{default:s(()=>[j]),_:2},1032,["onClick"])])):(o(),g("span",K,[y((o(),i(d,{type:"text",onClick:p(f=>e.$emit("edit",t),["stop"])},{default:s(()=>[R]),_:2},1032,["onClick"])),[[_,r.resource.edit]]),t.type===0?y((o(),i(d,{key:0,type:"text",onClick:p(f=>e.$emit("append",t),["stop"])},{default:s(()=>[I]),_:2},1032,["onClick"])),[[_,r.resource.add]]):u("",!0),t.type===0?y((o(),i(d,{key:1,type:"text",onClick:p(f=>e.$emit("add-resource",t),["stop"])},{default:s(()=>[J]),_:2},1032,["onClick"])),[[_,r.resource.add]]):u("",!0),y((o(),i(d,{type:"text",onClick:p(f=>e.$emit("remove",t),["stop"])},{default:s(()=>[S]),_:2},1032,["onClick"])),[[_,r.resource.remove]])]))])]),_:1},8,["data","props","show-checkbox","onCheckChange"])}var Q=T(M,[["render",F],["__scopeId","data-v-d26048e2"]]);export{Q as default};
