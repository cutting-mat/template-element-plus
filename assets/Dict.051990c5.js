import{_ as e,c as t,d as a,f as i,g as l,h as d,j as o,a as r}from"./index.711114fb.js";import{q as s,r as n,aX as c,aY as u,o as m,t as h,b as p,w as g,a as C,aC as f,aZ as k,v as b,ax as V}from"./ui.7155d707.js";const y={props:{picker:{type:Boolean,required:!1,default:!1},picked:{type:Object,required:!1,default:function(){return{}}}},components:{DictEditer:s((()=>r((()=>import("./DictEditer.e5e6a5bc.js")),["assets/DictEditer.e5e6a5bc.js","assets/DictEditer.5b348f51.css","assets/index.711114fb.js","assets/index.43470bb7.css","assets/ui.7155d707.js"])))},data:()=>({dict:t,dialogVisible:!1,editerVisible:!1,loading:!1,list:[],editForm:{dictName:"",dictCode:"",remark:""},queryParam:{pageSize:20,p:1,dictName:"",testNull:null,testStr:""},totalCount:0,totalPage:0,rules:{dictName:[{required:!0,message:"请输入字典名称",trigger:"blur"},{min:1,max:100,message:"长度 1 到 100 个字符",trigger:"blur"}],dictCode:[{required:!0,message:"请输入字典CODE",trigger:"blur"},{min:1,max:100,message:"长度 1 到 100 个字符",trigger:"blur"}]},currentChecked:{}}),watch:{picked:{handler:function(e){this.currentChecked=e},deep:!0,immediate:!0}},methods:{handleRowClick(e){this.picker&&(this.currentChecked=e,this.$emit("change",e))},editItem(e){const t=Object.assign({},e);this.editForm=t,this.editerVisible=!0},resetSearch(){this.queryParam.dictName="",this.fetchData(!0)},handleCurrentChange(e){this.queryParam.p=e,this.fetchData()},edit:function(e){const t=Object.assign({},e);this.editForm=t,this.dialogVisible=!0},save(){this.$refs.editForm.validate((e=>{if(e){let e=a(this.editForm);this.handleCloseDialog(),e.id?l(e).then((()=>{this.fetchData(),this.$message({message:"编辑成功",type:"success"})})):i(e).then((()=>{this.fetchData(),this.$message({message:"添加成功",type:"success"})}))}}))},handleCloseDialog:function(){this.dialogVisible=!1,this.editForm={dictName:"",dictCode:"",remark:""},this.$refs.editForm&&this.$refs.editForm.resetFields()},remove(e){if(!e)return null;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{d({dictCode:e.dictCode}).then((()=>{this.fetchData(),this.$message({message:"删除成功",type:"success"})}))}))},fetchData:function(e){e&&(this.queryParam.p=1),this.loading=!0,o(this.queryParam).then((e=>{this.loading=!1;const t=e.data;t&&(this.list=t.list,this.totalCount=t.totalCount,this.totalPage=t.totalPage)}))}},created:function(){this.fetchData()}},_=V(" 添加 "),F=V("编辑"),w=V("数据维护"),D=V("删除"),P=V("确 定"),q=V("取 消");const v=e(y,[["render",function(e,t,a,i,l,d){const o=n("plus"),r=n("el-icon"),s=n("el-button"),V=n("ToolBar"),y=n("success-filled"),v=n("el-table-column"),x=n("el-table"),N=n("Pagination"),E=n("el-input"),$=n("el-form-item"),j=n("el-form"),O=n("el-dialog"),I=n("DictEditer"),R=c("auth"),U=c("loading");return u((m(),h("div",null,[p(V,null,{default:g((()=>[a.picker?f("",!0):u((m(),C(s,{key:0,type:"primary",onClick:t[0]||(t[0]=e=>l.dialogVisible=!0)},{default:g((()=>[p(r,null,{default:g((()=>[p(o)])),_:1}),_])),_:1})),[[R,l.dict.add]])])),_:1}),p(x,{data:l.list,style:{width:"100%"},onRowClick:d.handleRowClick},{default:g((()=>[a.picker?(m(),C(v,{key:0,label:"选择",width:"50",align:"center"},{default:g((e=>[p(r,{class:k({checkIcon:!0,checked:e.row.dictCode===l.currentChecked.dictCode})},{default:g((()=>[p(y)])),_:2},1032,["class"])])),_:1})):(m(),C(v,{key:1,type:"index",width:"50"})),p(v,{prop:"dictName",label:"名称",align:"center"}),p(v,{prop:"dictCode",label:"CODE",align:"center"}),p(v,{prop:"remark",label:"备注",align:"center"}),a.picker?f("",!0):(m(),C(v,{key:2,label:"操作",width:"300",align:"center"},{default:g((e=>[u((m(),C(s,{onClick:t=>d.edit(e.row)},{default:g((()=>[F])),_:2},1032,["onClick"])),[[R,l.dict.edit]]),u((m(),C(s,{type:"warning",plain:"",onClick:t=>d.editItem(e.row)},{default:g((()=>[w])),_:2},1032,["onClick"])),[[R,l.dict.itemEdit]]),u((m(),C(s,{type:"danger",plain:"",onClick:t=>d.remove(e.row)},{default:g((()=>[D])),_:2},1032,["onClick"])),[[R,l.dict.remove]])])),_:1}))])),_:1},8,["data","onRowClick"]),p(N,{"page-size":l.queryParam.pageSize,"current-page":l.queryParam.p,"total-count":l.totalCount,"total-page":l.totalPage,onCurrentChange:d.handleCurrentChange},null,8,["page-size","current-page","total-count","total-page","onCurrentChange"]),p(O,{"close-on-click-modal":!1,title:"字典信息",modelValue:l.dialogVisible,"onUpdate:modelValue":t[5]||(t[5]=e=>l.dialogVisible=e),width:"600px",onClose:d.handleCloseDialog},{footer:g((()=>[b("div",null,[p(s,{type:"primary",onClick:d.save},{default:g((()=>[P])),_:1},8,["onClick"]),p(s,{onClick:t[4]||(t[4]=e=>l.dialogVisible=!1)},{default:g((()=>[q])),_:1})])])),default:g((()=>[p(j,{ref:"editForm",rules:l.rules,model:l.editForm,"label-width":"80px"},{default:g((()=>[p($,{label:"名称",prop:"dictName"},{default:g((()=>[p(E,{modelValue:l.editForm.dictName,"onUpdate:modelValue":t[1]||(t[1]=e=>l.editForm.dictName=e)},null,8,["modelValue"])])),_:1}),p($,{label:"CODE",prop:"dictCode"},{default:g((()=>[p(E,{modelValue:l.editForm.dictCode,"onUpdate:modelValue":t[2]||(t[2]=e=>l.editForm.dictCode=e),readonly:!!l.editForm.id},null,8,["modelValue","readonly"])])),_:1}),p($,{label:"备注",prop:"remark"},{default:g((()=>[p(E,{modelValue:l.editForm.remark,"onUpdate:modelValue":t[3]||(t[3]=e=>l.editForm.remark=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["rules","model"])])),_:1},8,["modelValue","onClose"]),p(I,{modelValue:l.editerVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>l.editerVisible=e),"dict-code":l.editForm.dictCode,onClose:t[7]||(t[7]=e=>l.editerVisible=!1)},null,8,["modelValue","dict-code"])])),[[U,l.loading]])}],["__scopeId","data-v-36825271"]]);export{v as default};
