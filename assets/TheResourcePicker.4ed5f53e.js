import{_ as e,b as t,t as s}from"./index.a7704b88.js";import{r as a}from"./resource.d8f51d3a.js";import{r,aX as i,o as c,a as l,w as o,v as d,t as n,b as h,aC as p,aZ as u,ay as y,ax as k,aY as f,aU as m}from"./ui.7155d707.js";const C={emits:["check"],props:{picker:{type:Boolean,required:!1,default:!1},checked:{type:Array,required:!1},listdata:{type:Array,required:!1}},data:()=>({resource:a,list:[],defaultProps:{children:"children",label:"title"},typeColor:{get:"success",post:"primary",put:"warning",delete:"danger"},trigger:null}),watch:{listdata:{handler:function(e){Array.isArray(e)&&(this.list=e)},immediate:!0},checked:{handler:function(){this.$refs.tree.setCheckedKeys(this.checked)},deep:!0}},methods:{handleCheckChange(e,t,s){const a=this.$refs.tree.getNode(e);a&&(this.$refs.tree.setChecked(a,t),s&&Array.isArray(e.children)&&e.children.length&&e.children.forEach((e=>{this.handleCheckChange(e,t,s)}))),this.$nextTick((()=>{this.trigger()}))},fetchData:function(){this.$store.getPermission().then((e=>{this.list=t(e.menus.concat(e.resources)),this.$nextTick((()=>{this.$refs.tree.setCheckedKeys(this.checked)}))}))}},created:function(){this.listdata||this.fetchData()},mounted(){this.trigger=s((()=>{this.$emit("check",this.$refs.tree.getCheckedNodes())}))}},g={class:"custom-tree-item"},x={class:"flex-1 extendLable"},_={key:0,style:{color:"#67c23a"}},$={key:0,class:"extendGroup"},b=k(" 编辑 "),v=k(" 添加子菜单 "),A=k(" 添加资源 "),w=k(" 删除 "),z={key:1,class:"extendGroup"},P=k(" 批量选择 ");const j=e(C,[["render",function(e,t,s,a,C,j){const q=r("Medal"),D=r("el-icon"),G=r("Position"),K=r("el-tag"),L=r("Link"),N=r("el-button"),T=r("el-tree"),U=i("auth");return c(),l(T,{ref:"tree",class:"custom-tree",data:C.list,props:C.defaultProps,"node-key":"id","default-expand-all":"","show-checkbox":s.picker,"check-strictly":"",onCheckChange:j.handleCheckChange},{default:o((({node:t,data:a})=>[d("div",g,[d("div",x,[1===a.type?(c(),n("span",_,[h(D,null,{default:o((()=>[h(q)])),_:1})])):p("",!0),d("span",{style:{"margin-right":"20px"},class:u({source:1===a.type})},y(a.name),3),1===a.type?(c(),l(K,{key:1,type:C.typeColor[a.method]},{default:o((()=>[h(D,null,{default:o((()=>[h(G)])),_:1}),k(" "+y(a.method.toUpperCase()),1)])),_:2},1032,["type"])):p("",!0),h(K,{type:"info"},{default:o((()=>[0===a.type?(c(),l(D,{key:0},{default:o((()=>[h(L)])),_:1})):p("",!0),k(" "+y(0===a.type?a.route:a.url),1)])),_:2},1024)]),s.picker?(c(),n("span",z,[h(N,{text:"",size:"small",type:"primary",onClick:m((e=>j.handleCheckChange(a,!t.checked,!0)),["stop"])},{default:o((()=>[P])),_:2},1032,["onClick"])])):(c(),n("span",$,[f((c(),l(N,{text:"",size:"small",type:"primary",onClick:m((t=>e.$emit("edit",a)),["stop"])},{default:o((()=>[b])),_:2},1032,["onClick"])),[[U,C.resource.edit]]),0===a.type?f((c(),l(N,{key:0,text:"",size:"small",type:"primary",onClick:m((t=>e.$emit("append",a)),["stop"])},{default:o((()=>[v])),_:2},1032,["onClick"])),[[U,C.resource.add]]):p("",!0),0===a.type?f((c(),l(N,{key:1,text:"",size:"small",type:"primary",onClick:m((t=>e.$emit("add-resource",a)),["stop"])},{default:o((()=>[A])),_:2},1032,["onClick"])),[[U,C.resource.add]]):p("",!0),f((c(),l(N,{text:"",size:"small",type:"danger",onClick:m((t=>e.$emit("remove",a)),["stop"])},{default:o((()=>[w])),_:2},1032,["onClick"])),[[U,C.resource.remove]])]))])])),_:1},8,["data","props","show-checkbox","onCheckChange"])}],["__scopeId","data-v-b94c02fd"]]);export{j as default};
