import{l as a,S as e,e as t,_ as l}from"./index.3253e0ab.js";import{r as s,o as r,t as o,v as i,b as n,w as u,aR as d,ax as c,aS as m,aT as h}from"./ui.9933098f.js";const p={data(){return{loading:!1,formData:{account:"",password:"",captcha:""},rules:{account:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:30,message:"长度在 3 到 30 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:30,message:"长度在 6 到 30 个字符",trigger:"blur"}],captcha:[{validator:()=>new Promise(((a,e)=>{if(!this.formData.captcha)return this.$refs.validCode.valid().then((e=>{this.formData.captcha=e,a()})).catch(e);a()})),trigger:"blur"}]}}},methods:{login(){if(this.loading)return null;this.loading=!0,this.$refs.validForm.validate((l=>{l?a(this.formData).then((a=>{200===a.status?(this.loading=!1,e(a.data),t.emit("login",(()=>{this.$router.replace({path:this.$router.currentRoute.value.query.redirect||"/"})}))):this.$message({message:"登陆失败",type:"warning"})})).catch((()=>{this.loading=!1})):this.loading=!1}))},handleChangePw(){this.$refs.auth.auth().then((a=>{this.$router.push({name:"修改密码",query:{authCode:a}})}))}}},f=a=>(m("data-v-181d01d5"),a=a(),h(),a),g={class:"flex-row align-center justify-center loginPage"},v=f((()=>i("h1",{class:"main-title"},"平台名称文字占位符后台管理系统",-1))),b=f((()=>i("h2",{class:"sub-title"},[i("span",{class:"_text"},"请登录")],-1))),w={class:"flex-row align-center"},_=f((()=>i("div",{class:"flex-1"},null,-1))),y={class:"flex-row"},x=f((()=>i("div",{class:"flex-1"},null,-1))),C=f((()=>i("i",{class:"el-icon-right"},null,-1))),D={class:"footer-info"},$=f((()=>i("span",{class:"_s"},"|",-1)));const V=l(p,[["render",function(a,e,t,l,m,h){const p=s("el-input"),f=s("el-form-item"),V=s("InputCaptchaImage"),k=s("el-link"),q=s("el-button"),P=s("el-form"),S=s("auth");return r(),o("div",g,[i("div",null,[v,n(P,{ref:"validForm",model:m.formData,rules:m.rules,class:"login-form",size:"large",onSubmit:d(h.login,["prevent"])},{default:u((()=>[b,n(f,{prop:"account"},{default:u((()=>[n(p,{autofocus:!0,placeholder:"输入用户名",modelValue:m.formData.account,"onUpdate:modelValue":e[0]||(e[0]=a=>m.formData.account=a)},null,8,["modelValue"])])),_:1}),n(f,{prop:"password"},{default:u((()=>[n(p,{placeholder:"输入密码",type:"password",modelValue:m.formData.password,"onUpdate:modelValue":e[1]||(e[1]=a=>m.formData.password=a),"show-password":""},null,8,["modelValue"])])),_:1}),n(f,{prop:"captcha"},{default:u((()=>[n(V,{ref:"validCode"},null,512)])),_:1}),i("div",w,[_,n(k,{type:"info",onClick:h.handleChangePw},{default:u((()=>[c(" 忘记密码？ ")])),_:1},8,["onClick"])]),n(f,{class:"submit-item"},{default:u((()=>[n(q,{"native-type":"submit",class:"submit-button",type:"primary",loading:m.loading},{default:u((()=>[c("登录")])),_:1},8,["loading"])])),_:1}),i("div",y,[x,n(k,{type:"primary",onClick:e[2]||(e[2]=e=>a.$router.push({name:"注册"}))},{default:u((()=>[c(" 立即注册 "),C])),_:1})])])),_:1},8,["model","rules","onSubmit"]),i("div",D,[c(" @2022 版权所有 占位文字 "),$,c(" Github： "),n(k,{type:"primary",href:"https://github.com/cutting-mat",target:"_blank"},{default:u((()=>[c("cutting-mat")])),_:1})])]),n(S,{ref:"auth",types:["email","mobile"],command:"reset-pw"},null,512)])}],["__scopeId","data-v-181d01d5"]]);export{V as default};
