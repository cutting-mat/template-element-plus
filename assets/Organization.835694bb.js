import{_ as w,q as B,d as v,r as n,z as V,A as u,o as a,c as N,e as s,w as l,h as c,i as O,a as q,f as C,k as d}from"./index.325e0c38.js";import{o as A,a as E,e as P,r as U}from"./org.8b054305.js";const z={components:{OrgTree:B(()=>q(()=>import("./OrgTree.0b679375.js"),["assets/OrgTree.0b679375.js","assets/org.8b054305.js","assets/index.325e0c38.js","assets/index.427412f4.css"]))},data(){return{org:A,dialogVisible:!1,sourceDepart:null,loading:!1,list:[],queryParam:{},editForm:{name:"",pid:null},rules:{name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:"blur"},{min:1,max:100,message:"\u957F\u5EA6 1 \u5230 100 \u4E2A\u5B57\u7B26",trigger:"blur"}],fullName:[{min:0,max:255,message:"\u957F\u5EA6 0 \u5230 255 \u4E2A\u5B57\u7B26",trigger:"blur"}]},refresh:!0}},methods:{edit(o){this.editForm=v(o),this.dialogVisible=!0},add(o){this.editForm={pid:o.pid},this.dialogVisible=!0},save(){let o=this;o.$refs.editForm.validate(t=>{if(t){let _=v(o.editForm);this.handleCloseDialog(),_.id?P(_).then(()=>{o.fetchData(),o.$message({message:"\u7F16\u8F91\u6210\u529F",type:"success"})}):E(_).then(()=>{o.fetchData(),o.$message({message:"\u6DFB\u52A0\u6210\u529F",type:"success"})})}})},handleCloseDialog:function(){this.dialogVisible=!1,this.editForm={name:"",pid:null}},remove(o){if(!o||!o.id)return null;this.$confirm("\u662F\u5426\u5220\u9664?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{this.loading=!0,U({id:o.id}).then(()=>{this.loading=!1,this.fetchData(),this.$message({message:"\u5220\u9664\u6210\u529F",type:"success"})}).catch(()=>{this.loading=!1})})},fetchData(){this.refresh=!1,this.$nextTick(()=>{this.refresh=!0})}}},I=d(" \u6DFB\u52A0\u6839\u8282\u70B9 "),L=d("\u7F16\u8F91"),R=d("\u6DFB\u52A0\u4E0B\u7EA7"),j=d("\u5220\u9664"),G={slot:"footer"},H=d("\u786E \u5B9A"),J=d("\u53D6 \u6D88");function K(o,t,_,M,e,m){const b=n("plus"),k=n("el-icon"),r=n("el-button"),y=n("ToolBar"),x=n("OrgTree"),g=n("el-input"),p=n("el-form-item"),D=n("el-form"),F=n("el-dialog"),f=V("auth"),T=V("loading");return u((a(),N("div",null,[s(y,null,{default:l(()=>[u((a(),c(r,{type:"primary",onClick:t[0]||(t[0]=i=>e.dialogVisible=!0)},{default:l(()=>[s(k,null,{default:l(()=>[s(b)]),_:1}),I]),_:1})),[[f,e.org.add]])]),_:1}),e.refresh?(a(),c(x,{key:0},{action:l(i=>[C("div",null,[u((a(),c(r,{onClick:h=>m.edit(i.row)},{default:l(()=>[L]),_:2},1032,["onClick"])),[[f,e.org.edit]]),u((a(),c(r,{onClick:h=>m.add(i.row)},{default:l(()=>[R]),_:2},1032,["onClick"])),[[f,e.org.add]]),u((a(),c(r,{type:"danger",plain:"",onClick:h=>m.remove(i.row)},{default:l(()=>[j]),_:2},1032,["onClick"])),[[f,e.org.remove]])])]),_:1})):O("",!0),s(F,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[5]||(t[5]=i=>e.dialogVisible=i),title:"\u7EC4\u7EC7\u4FE1\u606F",width:"800px","close-on-click-modal":!1,onClose:m.handleCloseDialog},{default:l(()=>[s(D,{ref:"editForm",rules:e.rules,model:e.editForm,"label-width":"150px"},{default:l(()=>[s(p,{label:"\u90E8\u95E8\u540D\u79F0",prop:"name"},{default:l(()=>[s(g,{modelValue:e.editForm.name,"onUpdate:modelValue":t[1]||(t[1]=i=>e.editForm.name=i)},null,8,["modelValue"])]),_:1}),s(p,{label:"\u5168\u79F0",prop:"fullName"},{default:l(()=>[s(g,{modelValue:e.editForm.fullName,"onUpdate:modelValue":t[2]||(t[2]=i=>e.editForm.fullName=i)},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"]),C("div",G,[s(r,{type:"primary",onClick:t[3]||(t[3]=i=>m.save())},{default:l(()=>[H]),_:1}),s(r,{onClick:t[4]||(t[4]=i=>e.dialogVisible=!1)},{default:l(()=>[J]),_:1})])]),_:1},8,["modelValue","onClose"])])),[[T,e.loading]])}var W=w(z,[["render",K]]);export{W as default};
