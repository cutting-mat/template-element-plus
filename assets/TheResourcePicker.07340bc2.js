import{b as e,t,_ as s}from"./index.3253e0ab.js";import{r as a}from"./resource.542c9c94.js";import{r,aU as i,o as c,a as l,w as o,v as d,t as n,b as h,aC as p,aW as u,ay as y,ax as k,aV as m,aR as f}from"./ui.9933098f.js";const C={emits:["check"],props:{picker:{type:Boolean,required:!1,default:!1},checked:{type:Array,required:!1},listdata:{type:Array,required:!1}},data:()=>({resource:a,list:[],defaultProps:{children:"children",label:"title"},typeColor:{get:"success",post:"primary",put:"warning",delete:"danger"},trigger:null}),watch:{listdata:{handler:function(e){Array.isArray(e)&&(this.list=e)},immediate:!0},checked:{handler:function(){this.$refs.tree.setCheckedKeys(this.checked)},deep:!0}},methods:{handleCheckChange(e,t,s){const a=this.$refs.tree.getNode(e);a&&(this.$refs.tree.setChecked(a,t),s&&Array.isArray(e.children)&&e.children.length&&e.children.forEach((e=>{this.handleCheckChange(e,t,s)}))),this.$nextTick((()=>{this.trigger()}))},fetchData:function(){this.$store.getPermission().then((t=>{this.list=e(t.menus.concat(t.resources)),this.$nextTick((()=>{this.$refs.tree.setCheckedKeys(this.checked)}))}))}},created:function(){this.listdata||this.fetchData()},mounted(){this.trigger=t((()=>{this.$emit("check",this.$refs.tree.getCheckedNodes())}))}},g={class:"custom-tree-item"},x={class:"flex-1 extendLable"},_={key:0,style:{color:"#67c23a"}},$={key:0,class:"extendGroup"},b={key:1,class:"extendGroup"};const v=s(C,[["render",function(e,t,s,a,C,v){const A=r("Medal"),w=r("el-icon"),z=r("Position"),P=r("el-tag"),j=r("Link"),q=r("el-button"),D=r("el-tree"),G=i("auth");return c(),l(D,{ref:"tree",class:"custom-tree",data:C.list,props:C.defaultProps,"node-key":"id","default-expand-all":"","show-checkbox":s.picker,"check-strictly":"",onCheckChange:v.handleCheckChange},{default:o((({node:t,data:a})=>[d("div",g,[d("div",x,[1===a.type?(c(),n("span",_,[h(w,null,{default:o((()=>[h(A)])),_:1})])):p("",!0),d("span",{style:{"margin-right":"20px"},class:u({source:1===a.type})},y(a.name),3),1===a.type?(c(),l(P,{key:1,type:C.typeColor[a.method]},{default:o((()=>[h(w,null,{default:o((()=>[h(z)])),_:1}),k(" "+y(a.method.toUpperCase()),1)])),_:2},1032,["type"])):p("",!0),h(P,{type:"info"},{default:o((()=>[0===a.type?(c(),l(w,{key:0},{default:o((()=>[h(j)])),_:1})):p("",!0),k(" "+y(0===a.type?a.route:a.url),1)])),_:2},1024)]),s.picker?(c(),n("span",b,[h(q,{text:"",size:"small",type:"primary",onClick:f((e=>v.handleCheckChange(a,!t.checked,!0)),["stop"])},{default:o((()=>[k(" 批量选择 ")])),_:2},1032,["onClick"])])):(c(),n("span",$,[m((c(),l(q,{text:"",size:"small",type:"primary",onClick:f((t=>e.$emit("edit",a)),["stop"])},{default:o((()=>[k(" 编辑 ")])),_:2},1032,["onClick"])),[[G,C.resource.edit]]),0===a.type?m((c(),l(q,{key:0,text:"",size:"small",type:"primary",onClick:f((t=>e.$emit("append",a)),["stop"])},{default:o((()=>[k(" 添加子菜单 ")])),_:2},1032,["onClick"])),[[G,C.resource.add]]):p("",!0),0===a.type?m((c(),l(q,{key:1,text:"",size:"small",type:"primary",onClick:f((t=>e.$emit("add-resource",a)),["stop"])},{default:o((()=>[k(" 添加资源 ")])),_:2},1032,["onClick"])),[[G,C.resource.add]]):p("",!0),m((c(),l(q,{text:"",size:"small",type:"danger",onClick:f((t=>e.$emit("remove",a)),["stop"])},{default:o((()=>[k(" 删除 ")])),_:2},1032,["onClick"])),[[G,C.resource.remove]])]))])])),_:1},8,["data","props","show-checkbox","onCheckChange"])}],["__scopeId","data-v-660bc073"]]);export{v as default};
