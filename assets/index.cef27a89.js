import{_ as e}from"./index.a7704b88.js";import{r as t,o as a,a as l,w as i,aF as r}from"./ui.7155d707.js";const n=e({name:"input-number",model:{prop:"value",event:"change"},props:{value:{type:[String,Number],required:!1,default:""},min:{type:Number,required:!1,default:-1/0},max:{type:Number,required:!1,default:1/0},precision:{type:Number,required:!1,default:0},round:{type:Boolean,required:!1,default:!1},zeroFill:{type:Boolean,required:!1,default:!1},placeholder:{type:String,required:!1,default:"请输入"},disabled:{type:Boolean,required:!1,default:!1},size:{type:String,required:!1,default:""},readonly:{type:Boolean,required:!1,default:!1}},data:()=>({myValue:null}),watch:{value:{handler(e){let t=e;isNaN(parseFloat(t))||(t<this.min&&""!==this.myValue&&(t=this.min),t>this.max&&(t=this.max)),this.myValue=t},immediate:!0},myValue:{handler(){this.$emit("change",this.myValue)},immediate:!0}},methods:{fillZero(e){if(null==e||""===e)return null;const t=this.precision;if(e.split&&this.zeroFill&&t>0){const a=e.indexOf(".");let l;-1===a?(l=t,e+="."):l=t-(e.length-1-a);for(let t=0;t<l;t++)e+="0"}return e},handleChange(){let e=this.myValue;e<this.min&&""!==this.myValue&&(e=this.min),e>this.max&&(e=this.max),this.myValue=this.retainDecimal(e,this.precision),this.zeroFill&&this.precision>0&&this.$nextTick((()=>{this.myValue=this.fillZero(this.myValue)}))},handleInput(e){if(null==e)return null;this.myValue=e.toString().trim().replace(/[^\d.-]/g,"").replace(/\./,"$#$").replace(/\./g,"").replace("$#$",".").replace(/^-/,"$#$").replace(/-/g,"").replace("$#$","-")},retainDecimal(e,t){if(t<0&&(t=0),e.split&&e.indexOf(".")===e.length-1&&t>0)return e;if(e.split&&e.indexOf("-")===e.length-1)return e;if(isNaN(parseFloat(e)))return null;let a;return a=this.round?Math.round(Math.round(parseFloat(e)*Math.pow(10,t)))/Math.pow(10,t):Math.floor(Math.round(parseFloat(e)*Math.pow(10,t)))/Math.pow(10,t),a=a.toString(),a}}},[["render",function(e,n,u,s,d,o){const p=t("el-input");return a(),l(p,{value:d.myValue,placeholder:u.placeholder,disabled:u.disabled,size:u.size,readonly:u.readonly,onInput:o.handleInput,onChange:n[0]||(n[0]=e=>o.handleChange(e,!0))},{prepend:i((()=>[r(e.$slots,"prepend")])),append:i((()=>[r(e.$slots,"append")])),_:3},8,["value","placeholder","disabled","size","readonly","onInput"])}]]);export{n as default};
