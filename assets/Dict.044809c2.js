import{c as e,d as t,f as a,g as i,h as l,j as d,a as o,_ as r}from"./index.3253e0ab.js";import{q as s,r as n,aU as c,aV as u,o as m,t as h,b as p,w as g,a as C,ax as f,aC as k,aW as b,v as V}from"./ui.9933098f.js";const y=r({props:{picker:{type:Boolean,required:!1,default:!1},picked:{type:Object,required:!1,default:function(){return{}}}},components:{DictEditer:s((()=>o((()=>import("./DictEditer.db619410.js")),["assets/DictEditer.db619410.js","assets/index.3253e0ab.js","assets/ui.9933098f.js","assets/index.58490702.css","assets/DictEditer.b66578f5.css"])))},data:()=>({dict:e,dialogVisible:!1,editerVisible:!1,loading:!1,list:[],editForm:{dictName:"",dictCode:"",remark:""},queryParam:{pageSize:20,p:1,dictName:"",testNull:null,testStr:""},totalCount:0,totalPage:0,rules:{dictName:[{required:!0,message:"请输入字典名称",trigger:"blur"},{min:1,max:100,message:"长度 1 到 100 个字符",trigger:"blur"}],dictCode:[{required:!0,message:"请输入字典CODE",trigger:"blur"},{min:1,max:100,message:"长度 1 到 100 个字符",trigger:"blur"}]},currentChecked:{}}),watch:{picked:{handler:function(e){this.currentChecked=e},deep:!0,immediate:!0}},methods:{handleRowClick(e){this.picker&&(this.currentChecked=e,this.$emit("change",e))},editItem(e){const t=Object.assign({},e);this.editForm=t,this.editerVisible=!0},resetSearch(){this.queryParam.dictName="",this.fetchData(!0)},handleCurrentChange(e){this.queryParam.p=e,this.fetchData()},edit:function(e){const t=Object.assign({},e);this.editForm=t,this.dialogVisible=!0},save(){this.$refs.editForm.validate((e=>{if(e){let e=t(this.editForm);this.handleCloseDialog(),e.id?i(e).then((()=>{this.fetchData(),this.$message({message:"编辑成功",type:"success"})})):a(e).then((()=>{this.fetchData(),this.$message({message:"添加成功",type:"success"})}))}}))},handleCloseDialog:function(){this.dialogVisible=!1,this.editForm={dictName:"",dictCode:"",remark:""},this.$refs.editForm&&this.$refs.editForm.resetFields()},remove(e){if(!e)return null;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{l({dictCode:e.dictCode}).then((()=>{this.fetchData(),this.$message({message:"删除成功",type:"success"})}))}))},fetchData:function(e){e&&(this.queryParam.p=1),this.loading=!0,d(this.queryParam).then((e=>{this.loading=!1;const t=e.data;t&&(this.list=t.list,this.totalCount=t.totalCount,this.totalPage=t.totalPage)}))}},created:function(){this.fetchData()}},[["render",function(e,t,a,i,l,d){const o=n("plus"),r=n("el-icon"),s=n("el-button"),y=n("ToolBar"),_=n("success-filled"),F=n("el-table-column"),w=n("el-table"),D=n("Pagination"),P=n("el-input"),q=n("el-form-item"),v=n("el-form"),x=n("el-dialog"),N=n("DictEditer"),E=c("auth"),$=c("loading");return u((m(),h("div",null,[p(y,null,{default:g((()=>[a.picker?k("",!0):u((m(),C(s,{key:0,type:"primary",onClick:t[0]||(t[0]=e=>l.dialogVisible=!0)},{default:g((()=>[p(r,null,{default:g((()=>[p(o)])),_:1}),f(" 添加 ")])),_:1})),[[E,l.dict.add]])])),_:1}),p(w,{data:l.list,style:{width:"100%"},onRowClick:d.handleRowClick},{default:g((()=>[a.picker?(m(),C(F,{key:0,label:"选择",width:"50",align:"center"},{default:g((e=>[p(r,{class:b({checkIcon:!0,checked:e.row.dictCode===l.currentChecked.dictCode})},{default:g((()=>[p(_)])),_:2},1032,["class"])])),_:1})):(m(),C(F,{key:1,type:"index",width:"50"})),p(F,{prop:"dictName",label:"名称",align:"center"}),p(F,{prop:"dictCode",label:"CODE",align:"center"}),p(F,{prop:"remark",label:"备注",align:"center"}),a.picker?k("",!0):(m(),C(F,{key:2,label:"操作",width:"300",align:"center"},{default:g((e=>[u((m(),C(s,{onClick:t=>d.edit(e.row)},{default:g((()=>[f("编辑")])),_:2},1032,["onClick"])),[[E,l.dict.edit]]),u((m(),C(s,{type:"warning",plain:"",onClick:t=>d.editItem(e.row)},{default:g((()=>[f("数据维护")])),_:2},1032,["onClick"])),[[E,l.dict.itemEdit]]),u((m(),C(s,{type:"danger",plain:"",onClick:t=>d.remove(e.row)},{default:g((()=>[f("删除")])),_:2},1032,["onClick"])),[[E,l.dict.remove]])])),_:1}))])),_:1},8,["data","onRowClick"]),p(D,{"page-size":l.queryParam.pageSize,"current-page":l.queryParam.p,"total-count":l.totalCount,"total-page":l.totalPage,onCurrentChange:d.handleCurrentChange},null,8,["page-size","current-page","total-count","total-page","onCurrentChange"]),p(x,{"close-on-click-modal":!1,title:"字典信息",modelValue:l.dialogVisible,"onUpdate:modelValue":t[5]||(t[5]=e=>l.dialogVisible=e),width:"600px",onClose:d.handleCloseDialog},{footer:g((()=>[V("div",null,[p(s,{type:"primary",onClick:d.save},{default:g((()=>[f("确 定")])),_:1},8,["onClick"]),p(s,{onClick:t[4]||(t[4]=e=>l.dialogVisible=!1)},{default:g((()=>[f("取 消")])),_:1})])])),default:g((()=>[p(v,{ref:"editForm",rules:l.rules,model:l.editForm,"label-width":"80px"},{default:g((()=>[p(q,{label:"名称",prop:"dictName"},{default:g((()=>[p(P,{modelValue:l.editForm.dictName,"onUpdate:modelValue":t[1]||(t[1]=e=>l.editForm.dictName=e)},null,8,["modelValue"])])),_:1}),p(q,{label:"CODE",prop:"dictCode"},{default:g((()=>[p(P,{modelValue:l.editForm.dictCode,"onUpdate:modelValue":t[2]||(t[2]=e=>l.editForm.dictCode=e),readonly:!!l.editForm.id},null,8,["modelValue","readonly"])])),_:1}),p(q,{label:"备注",prop:"remark"},{default:g((()=>[p(P,{modelValue:l.editForm.remark,"onUpdate:modelValue":t[3]||(t[3]=e=>l.editForm.remark=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["rules","model"])])),_:1},8,["modelValue","onClose"]),p(N,{modelValue:l.editerVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>l.editerVisible=e),"dict-code":l.editForm.dictCode,onClose:t[7]||(t[7]=e=>l.editerVisible=!1)},null,8,["modelValue","dict-code"])])),[[$,l.loading]])}],["__scopeId","data-v-9c37720d"]]);export{y as default};
