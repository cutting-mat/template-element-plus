import{l as p}from"./org.8b054305.js";import{_ as m,r as h,o as d,h as c,w as i,i as g,e as r,k as _,t as b,g as w}from"./index.325e0c38.js";const k={props:{value:{type:Array,required:!1,default(){return[]}},picker:{type:Boolean,required:!1,default:!1},multiple:{type:Boolean,required:!1,default:!1}},data(){return{loading:!1,tableData:[],selection:[]}},watch:{value:{handler(){this.tableData=this.value},deep:!0},selection:{handler(){this.picker&&this.$emit("pick",this.selection)},deep:!0}},methods:{handleSelectionChange(e){e.length>1&&!this.multiple?e.forEach((t,a)=>{this.$refs.table.toggleRowSelection(t,a===e.length-1)}):this.selection=e},load(e,t,a){this.fetchData(e?{pid:e.id}:null).then(n=>{a(n.data)})},fetchData(e){return this.loading=!0,p(e).then(t=>(this.loading=!1,t)).catch(()=>{this.loading=!1})}},created(){this.value.length?this.tableData=this.value:this.fetchData().then(e=>{this.tableData=e.data})}};function y(e,t,a,n,f,s){const l=h("el-table-column"),u=h("el-table");return d(),c(u,{ref:"table",height:"100%","row-key":"id",lazy:"",data:f.tableData,load:s.load,onSelectionChange:s.handleSelectionChange},{default:i(()=>[a.picker?(d(),c(l,{key:0,type:"selection",width:"45"})):g("",!0),r(l,{prop:"name",label:"\u540D\u79F0"}),r(l,{prop:"fullName",label:"\u5168\u79F0"}),r(l,{label:"\u521B\u5EFA\u65F6\u95F4"},{default:i(o=>[_(b(e.$filter.date(o.row.createTime)),1)]),_:1}),r(l,{label:"\u64CD\u4F5C",width:"260"},{default:i(o=>[w(e.$slots,"action",{row:o.row})]),_:3})]),_:3},8,["data","load","onSelectionChange"])}var C=m(k,[["render",y]]);export{C as default};
