import{r as e,o as t,a as i,w as l,ax as o,ay as r,aC as a,b as s,aU as n}from"./ui.7155d707.js";import{_ as u}from"./index.e5690914.js";const m={name:"AuthMobile",emits:["success"],props:{command:{type:String,required:!1}},data(){return{formData:{id:null,inputMobile:null},rules:{inputMobile:[{validator:(e,t,i)=>{if(t){if(this.userMobile&&this.userMobile!==t)return i(new Error("手机号不正确"));i()}else i(new Error("请输入绑定手机"))},trigger:[]}],userInput:[{validator:()=>new Promise(((e,t)=>{this.$refs.InputSMS.valid().then((t=>{this.resData=t,e()})).catch((e=>{t(e)}))})),trigger:[]}]},resData:null}},computed:{userMobile(){return String(this.$store.user.mobile||"")},anonymousMobile(){if(this.userMobile){const e=this.userMobile.split("");return`${e.map(((t,i)=>i<3||e.length-i<3?t:"*")).join("")}`}return""}},methods:{sendValidCode(){this.$refs.form.validateField("inputMobile",(e=>{e||this.$refs.InputSMS.send()}))},handleSubmit(){this.$refs.form.validate((e=>{e&&this.$emit("success",this.resData)}))}}},d=o(" 立即验证 ");const p=u(m,[["render",function(u,m,p,f,b,h){const M=e("el-form-item"),c=e("ChatLineSquare"),S=e("el-icon"),y=e("el-input"),_=e("InputSMS"),D=e("el-button"),g=e("el-form");return t(),i(g,{ref:"form",model:b.formData,rules:b.rules,"label-position":"left",class:"auth_mobile",onSubmit:n(h.handleSubmit,["prevent"])},{default:l((()=>[h.anonymousMobile?(t(),i(M,{key:0},{default:l((()=>[o("绑定手机："+r(h.anonymousMobile),1)])),_:1})):a("",!0),s(M,{prop:"inputMobile"},{default:l((()=>[s(y,{modelValue:b.formData.inputMobile,"onUpdate:modelValue":m[0]||(m[0]=e=>b.formData.inputMobile=e),placeholder:"请输入绑定手机"},{prefix:l((()=>[s(S,null,{default:l((()=>[s(c)])),_:1})])),_:1},8,["modelValue"])])),_:1}),s(M,{prop:"userInput"},{default:l((()=>[s(_,{ref:"InputSMS",type:p.command,mobile:b.formData.inputMobile,onClick:h.sendValidCode},null,8,["type","mobile","onClick"])])),_:1}),s(M,null,{default:l((()=>[s(D,{"native-type":"submit",type:"primary",style:{width:"100%"}},{default:l((()=>[d])),_:1})])),_:1})])),_:1},8,["model","rules","onSubmit"])}]]);export{p as default};
