import{l as e}from"./org.885c46e3.js";import{aL as a,aK as t,r as l,o as i,a as o,w as s,aC as n,b as h,ax as r,ay as d,aF as c}from"./ui.9933098f.js";import{_ as p}from"./index.3253e0ab.js";const u=p({props:{value:{type:Array,required:!1,default:()=>[]},picker:{type:Boolean,required:!1,default:!1},multiple:{type:Boolean,required:!1,default:!1}},data:()=>({loading:!1,tableData:[],selection:[]}),watch:{value:{handler(){this.tableData=this.value},deep:!0},selection:{handler(){this.picker&&this.$emit("pick",a(this.selection))},deep:!0}},methods:{handleSelectionChange(e){(e=e.map((e=>t(e)?a(e):e))).length>1&&!this.multiple?e.forEach(((a,t)=>{this.$refs.table.toggleRowSelection(a,t===e.length-1)})):this.selection=e},load(e,a,t){this.fetchData(e?{pid:e.id}:null).then((e=>{t(e.data)}))},fetchData(a){return this.loading=!0,e(a).then((e=>(this.loading=!1,e))).catch((()=>{this.loading=!1}))}},created(){this.value.length?this.tableData=this.value:this.fetchData().then((e=>{this.tableData=e.data}))}},[["render",function(e,a,t,p,u,f){const b=l("el-table-column"),g=l("el-table");return i(),o(g,{ref:"table",height:"100%","row-key":"id",lazy:"",data:u.tableData,load:f.load,onSelectionChange:f.handleSelectionChange},{default:s((()=>[t.picker?(i(),o(b,{key:0,type:"selection",width:"50"})):n("",!0),h(b,{prop:"name",label:"名称"}),h(b,{prop:"fullName",label:"全称"}),h(b,{label:"创建时间"},{default:s((a=>[r(d(e.$filter.date(a.row.createTime)),1)])),_:1}),t.picker?n("",!0):(i(),o(b,{key:1,label:"操作",width:"260"},{default:s((a=>[c(e.$slots,"action",{row:a.row})])),_:3}))])),_:3},8,["data","load","onSelectionChange"])}]]);export{u as default};
