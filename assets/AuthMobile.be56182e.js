import{_ as y,r,o as m,g as d,w as i,l as p,t as v,h as g,e as n,v as C}from"./index.cc0542f8.js";const D={name:"AuthMobile",emits:["success"],props:{command:{type:String,required:!1}},data(){return{formData:{id:null,inputMobile:null},rules:{inputMobile:[{validator:(l,o,e)=>{if(!o)e(new Error("\u8BF7\u8F93\u5165\u7ED1\u5B9A\u624B\u673A"));else{if(this.userMobile&&this.userMobile!==o)return e(new Error("\u624B\u673A\u53F7\u4E0D\u6B63\u786E"));e()}},trigger:[]}],userInput:[{validator:()=>new Promise((l,o)=>{this.$refs.InputSMS.valid().then(e=>{this.resData=e,l()}).catch(e=>{o(e)})}),trigger:[]}]},resData:null}},computed:{userMobile(){return String(this.$store.user.mobile||"")},anonymousMobile(){if(this.userMobile){const t=this.userMobile.split("");return`${t.map((l,o)=>o<3||t.length-o<3?l:"*").join("")}`}return""}},methods:{sendValidCode(){this.$refs.form.validateField("inputMobile",t=>{t||this.$refs.InputSMS.send()})},handleSubmit(){this.$refs.form.validate(t=>{t&&this.$emit("success",this.resData)})}}},V=p(" \u7ACB\u5373\u9A8C\u8BC1 ");function w(t,s,l,o,e,u){const a=r("el-form-item"),f=r("ChatLineSquare"),c=r("el-icon"),_=r("el-input"),b=r("InputSMS"),h=r("el-button"),M=r("el-form");return m(),d(M,{ref:"form",model:e.formData,rules:e.rules,"label-position":"left",class:"auth_mobile",onSubmit:C(u.handleSubmit,["prevent"])},{default:i(()=>[u.anonymousMobile?(m(),d(a,{key:0},{default:i(()=>[p("\u7ED1\u5B9A\u624B\u673A\uFF1A"+v(u.anonymousMobile),1)]),_:1})):g("",!0),n(a,{prop:"inputMobile"},{default:i(()=>[n(_,{modelValue:e.formData.inputMobile,"onUpdate:modelValue":s[0]||(s[0]=S=>e.formData.inputMobile=S),placeholder:"\u8BF7\u8F93\u5165\u7ED1\u5B9A\u624B\u673A"},{prefix:i(()=>[n(c,null,{default:i(()=>[n(f)]),_:1})]),_:1},8,["modelValue"])]),_:1}),n(a,{prop:"userInput"},{default:i(()=>[n(b,{ref:"InputSMS",type:l.command,mobile:e.formData.inputMobile,onClick:u.sendValidCode},null,8,["type","mobile","onClick"])]),_:1}),n(a,null,{default:i(()=>[n(h,{"native-type":"submit",type:"primary",style:{width:"100%"}},{default:i(()=>[V]),_:1})]),_:1})]),_:1},8,["model","rules","onSubmit"])}const x=y(D,[["render",w]]);export{x as default};
