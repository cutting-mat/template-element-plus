import{l as g}from"./org.a3b40782.js";import{_,Q as c,R as b,r as u,o,g as i,w as n,h as f,e as s,l as w,t as k,f as y}from"./index.07ef7170.js";const D={props:{value:{type:Array,required:!1,default(){return[]}},picker:{type:Boolean,required:!1,default:!1},multiple:{type:Boolean,required:!1,default:!1}},data(){return{loading:!1,tableData:[],selection:[]}},watch:{value:{handler(){this.tableData=this.value},deep:!0},selection:{handler(){this.picker&&this.$emit("pick",c(this.selection))},deep:!0}},methods:{handleSelectionChange(e){e=e.map(t=>b(t)?c(t):t),e.length>1&&!this.multiple?e.forEach((t,a)=>{this.$refs.table.toggleRowSelection(t,a===e.length-1)}):this.selection=e},load(e,t,a){this.fetchData(e?{pid:e.id}:null).then(h=>{a(h.data)})},fetchData(e){return this.loading=!0,g(e).then(t=>(this.loading=!1,t)).catch(()=>{this.loading=!1})}},created(){this.value.length?this.tableData=this.value:this.fetchData().then(e=>{this.tableData=e.data})}};function v(e,t,a,h,p,d){const l=u("el-table-column"),m=u("el-table");return o(),i(m,{ref:"table",height:"100%","row-key":"id",lazy:"",data:p.tableData,load:d.load,onSelectionChange:d.handleSelectionChange},{default:n(()=>[a.picker?(o(),i(l,{key:0,type:"selection",width:"50"})):f("",!0),s(l,{prop:"name",label:"\u540D\u79F0"}),s(l,{prop:"fullName",label:"\u5168\u79F0"}),s(l,{label:"\u521B\u5EFA\u65F6\u95F4"},{default:n(r=>[w(k(e.$filter.date(r.row.createTime)),1)]),_:1}),a.picker?f("",!0):(o(),i(l,{key:1,label:"\u64CD\u4F5C",width:"260"},{default:n(r=>[y(e.$slots,"action",{row:r.row})]),_:3}))]),_:3},8,["data","load","onSelectionChange"])}var B=_(D,[["render",v]]);export{B as default};
