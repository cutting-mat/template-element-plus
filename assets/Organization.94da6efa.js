import{_ as w,D as B,d as v,r as n,B as V,C as u,o as a,c as N,e as s,w as l,g as c,h as O,k as C,a as E,l as d}from"./index.cc0542f8.js";import{o as P,a as U,e as q,r as A}from"./org.22e24e45.js";const z={components:{OrgTree:B(()=>E(()=>import("./OrgTree.0592e6d5.js"),["assets/OrgTree.0592e6d5.js","assets/org.22e24e45.js","assets/index.cc0542f8.js","assets/index.43470bb7.css"]))},data(){return{org:P,dialogVisible:!1,sourceDepart:null,loading:!1,list:[],queryParam:{},editForm:{name:"",pid:null},rules:{name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:"blur"},{min:1,max:100,message:"\u957F\u5EA6 1 \u5230 100 \u4E2A\u5B57\u7B26",trigger:"blur"}],fullName:[{min:0,max:255,message:"\u957F\u5EA6 0 \u5230 255 \u4E2A\u5B57\u7B26",trigger:"blur"}]},refresh:!0}},methods:{edit(o){this.editForm=v(o),this.dialogVisible=!0},add(o){this.editForm={pid:o.pid},this.dialogVisible=!0},save(){let o=this;o.$refs.editForm.validate(t=>{if(t){let _=v(o.editForm);this.handleCloseDialog(),_.id?q(_).then(()=>{o.fetchData(),o.$message({message:"\u7F16\u8F91\u6210\u529F",type:"success"})}):U(_).then(()=>{o.fetchData(),o.$message({message:"\u6DFB\u52A0\u6210\u529F",type:"success"})})}})},handleCloseDialog:function(){this.dialogVisible=!1,this.editForm={name:"",pid:null}},remove(o){if(!o||!o.id)return null;this.$confirm("\u662F\u5426\u5220\u9664?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{this.loading=!0,A({id:o.id}).then(()=>{this.loading=!1,this.fetchData(),this.$message({message:"\u5220\u9664\u6210\u529F",type:"success"})}).catch(()=>{this.loading=!1})})},fetchData(){this.refresh=!1,this.$nextTick(()=>{this.refresh=!0})}}},I={class:"scrollbar"},L=d(" \u6DFB\u52A0\u6839\u8282\u70B9 "),R=d("\u7F16\u8F91"),j=d("\u6DFB\u52A0\u4E0B\u7EA7"),G=d("\u5220\u9664"),H=d("\u786E \u5B9A"),J=d("\u53D6 \u6D88");function K(o,t,_,M,e,m){const b=n("plus"),k=n("el-icon"),r=n("el-button"),y=n("ToolBar"),D=n("OrgTree"),g=n("el-input"),p=n("el-form-item"),x=n("el-form"),F=n("el-dialog"),f=V("auth"),T=V("loading");return u((a(),N("div",I,[s(y,null,{default:l(()=>[u((a(),c(r,{type:"primary",onClick:t[0]||(t[0]=i=>e.dialogVisible=!0)},{default:l(()=>[s(k,null,{default:l(()=>[s(b)]),_:1}),L]),_:1})),[[f,e.org.add]])]),_:1}),e.refresh?(a(),c(D,{key:0},{action:l(i=>[C("div",null,[u((a(),c(r,{onClick:h=>m.edit(i.row)},{default:l(()=>[R]),_:2},1032,["onClick"])),[[f,e.org.edit]]),u((a(),c(r,{onClick:h=>m.add(i.row)},{default:l(()=>[j]),_:2},1032,["onClick"])),[[f,e.org.add]]),u((a(),c(r,{type:"danger",plain:"",onClick:h=>m.remove(i.row)},{default:l(()=>[G]),_:2},1032,["onClick"])),[[f,e.org.remove]])])]),_:1})):O("",!0),s(F,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[5]||(t[5]=i=>e.dialogVisible=i),title:"\u7EC4\u7EC7\u4FE1\u606F",width:"800px","close-on-click-modal":!1,onClose:m.handleCloseDialog},{footer:l(()=>[C("div",null,[s(r,{type:"primary",onClick:t[3]||(t[3]=i=>m.save())},{default:l(()=>[H]),_:1}),s(r,{onClick:t[4]||(t[4]=i=>e.dialogVisible=!1)},{default:l(()=>[J]),_:1})])]),default:l(()=>[s(x,{ref:"editForm",rules:e.rules,model:e.editForm,"label-width":"150px"},{default:l(()=>[s(p,{label:"\u90E8\u95E8\u540D\u79F0",prop:"name"},{default:l(()=>[s(g,{modelValue:e.editForm.name,"onUpdate:modelValue":t[1]||(t[1]=i=>e.editForm.name=i)},null,8,["modelValue"])]),_:1}),s(p,{label:"\u5168\u79F0",prop:"fullName"},{default:l(()=>[s(g,{modelValue:e.editForm.fullName,"onUpdate:modelValue":t[2]||(t[2]=i=>e.editForm.fullName=i)},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","onClose"])])),[[T,e.loading]])}const W=w(z,[["render",K]]);export{W as default};
