import{A as e,_ as a,r as t,B as o,C as s,o as r,c as l,e as i,w as n,v as d,g as u,h as m,l as c}from"./index.cc0542f8.js";const f={data(){return{loading:!1,formData:{token:"",checkPass:"",newPassword:""},rules:{newPassword:[{validator:(e,a,t)=>{""===a?t(new Error("请输入密码")):(""!==this.formData.checkPass&&this.$refs.form.validateField("checkPass"),t())},trigger:"blur"},{min:6,max:30,message:"长度在 6 到 30 个字符",trigger:"blur"}],checkPass:[{validator:(e,a,t)=>{""===a?t(new Error("请再次输入密码")):a!==this.formData.newPassword?t(new Error("两次输入密码不一致!")):t()},trigger:"blur"}]}}},methods:{submitForm(){this.$refs.form.validate((a=>{if(a){this.loading=!0;let a=Object.assign({},this.formData);delete a.checkPass,(t=a,e.put("/updatePassword",t,o)).then((()=>{this.loading=!1,this.$alert("密码修改成功",{callback:()=>{this.$router.go(-1)}})})).catch((()=>{this.loading=!1}))}var t,o}))}},created:function(){this.$route.query.authCode&&(this.formData.token=this.$route.query.authCode)}},h=c("提交");const p=a(f,[["render",function(e,a,c,f,p,w){const g=t("ToolBar"),b=t("el-alert"),P=t("input-password"),k=t("el-form-item"),D=t("el-input"),v=t("el-button"),y=t("el-form"),V=o("loading");return s((r(),l("div",null,[i(g),i(y,{class:"wrap",model:p.formData,"status-icon":"",rules:p.rules,ref:"form","label-width":"100px",onSubmit:d(w.submitForm,["prevent"])},{default:n((()=>[p.formData.token?m("",!0):(r(),u(b,{key:0,title:"未验证用户身份，请返回重试！",type:"error","show-icon":"",closable:!1,style:{"margin-bottom":"20px"}})),i(k,{label:"新密码",prop:"newPassword"},{default:n((()=>[i(P,{modelValue:p.formData.newPassword,"onUpdate:modelValue":a[0]||(a[0]=e=>p.formData.newPassword=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(k,{label:"确认密码",prop:"checkPass"},{default:n((()=>[i(D,{type:"password",modelValue:p.formData.checkPass,"onUpdate:modelValue":a[1]||(a[1]=e=>p.formData.checkPass=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(k,null,{default:n((()=>[i(v,{type:"primary","native-type":"submit"},{default:n((()=>[h])),_:1})])),_:1})])),_:1},8,["model","rules","onSubmit"])])),[[V,p.loading,void 0,{fullscreen:!0}]])}]]);export{p as default};
