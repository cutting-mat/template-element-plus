import{_ as a,l as e,S as t,e as l}from"./index.711114fb.js";import{r as s,o as r,t as o,v as i,b as n,w as u,aU as d,ax as c,aV as m,aW as h}from"./ui.7155d707.js";const p={data(){return{loading:!1,formData:{account:"",password:"",captcha:""},rules:{account:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:30,message:"长度在 3 到 30 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:30,message:"长度在 6 到 30 个字符",trigger:"blur"}],captcha:[{validator:()=>new Promise(((a,e)=>{if(!this.formData.captcha)return this.$refs.validCode.valid().then((e=>{this.formData.captcha=e,a()})).catch(e);a()})),trigger:"blur"}]}}},methods:{login(){if(this.loading)return null;this.loading=!0,this.$refs.validForm.validate((a=>{a?e(this.formData).then((a=>{200===a.status?(this.loading=!1,t(a.data),l.emit("login",(()=>{this.$router.replace({path:this.$router.currentRoute.value.query.redirect||"/"})}))):this.$message({message:"登陆失败",type:"warning"})})).catch((()=>{this.loading=!1})):this.loading=!1}))},handleChangePw(){this.$refs.auth.auth().then((a=>{this.$router.push({name:"修改密码",query:{authCode:a}})}))}}},f=a=>(m("data-v-55566df1"),a=a(),h(),a),g={class:"flex-row align-center justify-center loginPage"},v=f((()=>i("h1",{class:"main-title"},"平台名称文字占位符后台管理系统",-1))),b=f((()=>i("h2",{class:"sub-title"},[i("span",{class:"_text"},"请登录")],-1))),w={class:"flex-row align-center"},_=f((()=>i("div",{class:"flex-1"},null,-1))),y=c(" 忘记密码？ "),x=c("登录"),C={class:"flex-row"},D=f((()=>i("div",{class:"flex-1"},null,-1))),$=c(" 立即注册 "),V=f((()=>i("i",{class:"el-icon-right"},null,-1))),k={class:"footer-info"},q=c(" @2022 版权所有 占位文字 "),P=f((()=>i("span",{class:"_s"},"|",-1))),j=c(" Github： "),I=c("cutting-mat");const S=a(p,[["render",function(a,e,t,l,c,m){const h=s("el-input"),p=s("el-form-item"),f=s("InputCaptchaImage"),S=s("el-link"),U=s("el-button"),F=s("el-form"),z=s("auth");return r(),o("div",g,[i("div",null,[v,n(F,{ref:"validForm",model:c.formData,rules:c.rules,class:"login-form",size:"large",onSubmit:d(m.login,["prevent"])},{default:u((()=>[b,n(p,{prop:"account"},{default:u((()=>[n(h,{autofocus:!0,placeholder:"输入用户名",modelValue:c.formData.account,"onUpdate:modelValue":e[0]||(e[0]=a=>c.formData.account=a)},null,8,["modelValue"])])),_:1}),n(p,{prop:"password"},{default:u((()=>[n(h,{placeholder:"输入密码",type:"password",modelValue:c.formData.password,"onUpdate:modelValue":e[1]||(e[1]=a=>c.formData.password=a),"show-password":""},null,8,["modelValue"])])),_:1}),n(p,{prop:"captcha"},{default:u((()=>[n(f,{ref:"validCode"},null,512)])),_:1}),i("div",w,[_,n(S,{type:"info",onClick:m.handleChangePw},{default:u((()=>[y])),_:1},8,["onClick"])]),n(p,{class:"submit-item"},{default:u((()=>[n(U,{"native-type":"submit",class:"submit-button",type:"primary",loading:c.loading},{default:u((()=>[x])),_:1},8,["loading"])])),_:1}),i("div",C,[D,n(S,{type:"primary",onClick:e[2]||(e[2]=e=>a.$router.push({name:"注册"}))},{default:u((()=>[$,V])),_:1})])])),_:1},8,["model","rules","onSubmit"]),i("div",k,[q,P,j,n(S,{type:"primary",href:"https://github.com/cutting-mat",target:"_blank"},{default:u((()=>[I])),_:1})])]),n(z,{ref:"auth",types:["email","mobile"],command:"reset-pw"},null,512)])}],["__scopeId","data-v-55566df1"]]);export{S as default};
