import{_ as w,C as B,d as v,r as n,A as V,B as u,o as a,c as N,e as s,w as t,g as c,h as O,a as A,k as C,l as d}from"./index.a957bfba.js";import{o as E,a as P,e as U,r as q}from"./org.7959861a.js";const z={components:{OrgTree:B(()=>A(()=>import("./OrgTree.10444723.js"),["assets/OrgTree.10444723.js","assets/org.7959861a.js","assets/index.a957bfba.js","assets/index.96f7d10f.css"]))},data(){return{org:E,dialogVisible:!1,sourceDepart:null,loading:!1,list:[],queryParam:{},editForm:{name:"",pid:null},rules:{name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:"blur"},{min:1,max:100,message:"\u957F\u5EA6 1 \u5230 100 \u4E2A\u5B57\u7B26",trigger:"blur"}],fullName:[{min:0,max:255,message:"\u957F\u5EA6 0 \u5230 255 \u4E2A\u5B57\u7B26",trigger:"blur"}]},refresh:!0}},methods:{edit(o){this.editForm=v(o),this.dialogVisible=!0},add(o){this.editForm={pid:o.pid},this.dialogVisible=!0},save(){let o=this;o.$refs.editForm.validate(l=>{if(l){let _=v(o.editForm);this.handleCloseDialog(),_.id?U(_).then(()=>{o.fetchData(),o.$message({message:"\u7F16\u8F91\u6210\u529F",type:"success"})}):P(_).then(()=>{o.fetchData(),o.$message({message:"\u6DFB\u52A0\u6210\u529F",type:"success"})})}})},handleCloseDialog:function(){this.dialogVisible=!1,this.editForm={name:"",pid:null}},remove(o){if(!o||!o.id)return null;this.$confirm("\u662F\u5426\u5220\u9664?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{this.loading=!0,q({id:o.id}).then(()=>{this.loading=!1,this.fetchData(),this.$message({message:"\u5220\u9664\u6210\u529F",type:"success"})}).catch(()=>{this.loading=!1})})},fetchData(){this.refresh=!1,this.$nextTick(()=>{this.refresh=!0})}}},I=d(" \u6DFB\u52A0\u6839\u8282\u70B9 "),L=d("\u7F16\u8F91"),R=d("\u6DFB\u52A0\u4E0B\u7EA7"),j=d("\u5220\u9664"),G=d("\u786E \u5B9A"),H=d("\u53D6 \u6D88");function J(o,l,_,K,e,m){const b=n("plus"),k=n("el-icon"),r=n("el-button"),y=n("ToolBar"),x=n("OrgTree"),g=n("el-input"),p=n("el-form-item"),D=n("el-form"),F=n("el-dialog"),f=V("auth"),T=V("loading");return u((a(),N("div",null,[s(y,null,{default:t(()=>[u((a(),c(r,{type:"primary",onClick:l[0]||(l[0]=i=>e.dialogVisible=!0)},{default:t(()=>[s(k,null,{default:t(()=>[s(b)]),_:1}),I]),_:1})),[[f,e.org.add]])]),_:1}),e.refresh?(a(),c(x,{key:0},{action:t(i=>[C("div",null,[u((a(),c(r,{onClick:h=>m.edit(i.row)},{default:t(()=>[L]),_:2},1032,["onClick"])),[[f,e.org.edit]]),u((a(),c(r,{onClick:h=>m.add(i.row)},{default:t(()=>[R]),_:2},1032,["onClick"])),[[f,e.org.add]]),u((a(),c(r,{type:"danger",plain:"",onClick:h=>m.remove(i.row)},{default:t(()=>[j]),_:2},1032,["onClick"])),[[f,e.org.remove]])])]),_:1})):O("",!0),s(F,{modelValue:e.dialogVisible,"onUpdate:modelValue":l[5]||(l[5]=i=>e.dialogVisible=i),title:"\u7EC4\u7EC7\u4FE1\u606F",width:"800px","close-on-click-modal":!1,onClose:m.handleCloseDialog},{footer:t(()=>[C("div",null,[s(r,{type:"primary",onClick:l[3]||(l[3]=i=>m.save())},{default:t(()=>[G]),_:1}),s(r,{onClick:l[4]||(l[4]=i=>e.dialogVisible=!1)},{default:t(()=>[H]),_:1})])]),default:t(()=>[s(D,{ref:"editForm",rules:e.rules,model:e.editForm,"label-width":"150px"},{default:t(()=>[s(p,{label:"\u90E8\u95E8\u540D\u79F0",prop:"name"},{default:t(()=>[s(g,{modelValue:e.editForm.name,"onUpdate:modelValue":l[1]||(l[1]=i=>e.editForm.name=i)},null,8,["modelValue"])]),_:1}),s(p,{label:"\u5168\u79F0",prop:"fullName"},{default:t(()=>[s(g,{modelValue:e.editForm.fullName,"onUpdate:modelValue":l[2]||(l[2]=i=>e.editForm.fullName=i)},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","onClose"])])),[[T,e.loading]])}var S=w(z,[["render",J]]);export{S as default};
